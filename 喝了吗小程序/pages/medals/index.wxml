<!-- pages/medals/index.wxml -->
<view class="container">
  <!-- 标题栏 -->
  <view class="header">
    <navigator class="back-btn" url="/pages/home/index">
      <image src="/images/back-icon.png" mode="aspectFit"></image>
    </navigator>
    <text class="page-title">成就勋章</text>
    <button class="more-btn" bindtap="showMoreOptions">
      <image src="/images/more-icon.png" mode="aspectFit"></image>
    </button>
  </view>

  <!-- 总进度 -->
  <view class="progress-card">
    <view class="progress-header">
      <text class="progress-title">成就进度</text>
      <text class="progress-text">{{unlockedCount}}/{{totalMedals}} 已解锁</text>
    </view>
    <view class="progress-bar">
      <view class="progress-fill" style="width: {{progressPercentage}}%;"></view>
    </view>
  </view>

  <!-- 特色勋章 -->
  <view class="featured-section">
    <text class="section-title">特色勋章</text>
    <view class="featured-medal" wx:if="{{featuredMedal}}">
      <image class="medal-image" src="{{featuredMedal.image}}" mode="aspectFit"></image>
      <view class="medal-info">
        <text class="medal-name">{{featuredMedal.name}}</text>
        <text class="medal-desc">{{featuredMedal.description}}</text>
        <view class="medal-date">
          <image src="/images/calendar-icon.png" mode="aspectFit"></image>
          <text>{{featuredMedal.date}}</text>
        </view>
      </view>
      <button class="share-btn" bindtap="shareMedal">
        <image src="/images/share-icon.png" mode="aspectFit"></image>
        <text>分享到微信</text>
      </button>
    </view>
  </view>

  <!-- 所有勋章 -->
  <view class="medals-section">
    <text class="section-title">全部勋章</text>
    <view class="medals-grid">
      <view class="medal-item" wx:for="{{medals}}" wx:key="id" bindtap="showMedalDetail" data-id="{{item.id}}">
        <view class="medal-icon-container {{item.unlocked ? 'unlocked' : 'locked'}}">
          <image class="medal-icon" src="{{item.image}}" mode="aspectFit"></image>
        </view>
        <text class="medal-name">{{item.name}}</text>
        <text class="medal-status">{{item.unlocked ? '已解锁' : '未解锁'}}</text>
      </view>
    </view>
  </view>
</view>